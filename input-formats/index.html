<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>File formats &mdash; Niimpy dev documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../_static/togglebutton.css" type="text/css" />
      <link rel="stylesheet" href="../_static/mystnb.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script>let toggleHintShow = 'Click to show';</script>
        <script>let toggleHintHide = 'Click to hide';</script>
        <script>let toggleOpenOnPrint = 'true';</script>
        <script src="../_static/togglebutton.js"></script>
        <script>var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex/" />
    <link rel="search" title="Search" href="../search/" />
    <link rel="next" title="Basic transformations" href="../basic-transformations/" />
    <link rel="prev" title="Niimpy introduction" href="../introduction/" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../" class="icon icon-home"> Niimpy
          </a>
              <div class="version">
                dev
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search/" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Basics</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../introduction/">Niimpy introduction</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">File formats</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#dataframe-format-in-memory">DataFrame format (in-memory)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#csv-files">CSV files</a></li>
<li class="toctree-l2"><a class="reference internal" href="#sqlite3-databases">sqlite3 databases</a></li>
<li class="toctree-l2"><a class="reference internal" href="#other-formats">Other formats</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../basic-transformations/">Basic transformations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../preprocessing/">Preprocessing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../summary-statistics/">Summary statistics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../see-also/">See also</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Data stream analysis</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../survey/">Surveys</a></li>
<li class="toctree-l1"><a class="reference internal" href="../screen/">Screen</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../schema/">Data schema</a></li>
<li class="toctree-l1"><a class="reference internal" href="../architecture/">Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../database/">Database interface</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api/modules/">niimpy API docs</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Development</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../adding-features/">Adding features</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Data documentation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../data-sources/">About data sources</a></li>
<li class="toctree-l1"><a class="reference internal" href="../aware/">Aware</a></li>
<li class="toctree-l1"><a class="reference internal" href="../aware/#survey">Survey</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../">Niimpy</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../" class="icon icon-home"></a> &raquo;</li>
      <li>File formats</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/input-formats.ipynb.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section class="tex2jax_ignore mathjax_ignore" id="file-formats">
<h1>File formats<a class="headerlink" href="#file-formats" title="Permalink to this headline"></a></h1>
<p>In principle, Niimpy can deal with any files of any format - you only need to convert them to a standard DataFrame.  Still, it is very useful to have some common formats, so we present two standard formats with default readers:</p>
<ul class="simple">
<li><p><strong>CSV files</strong> are very standard and normal to create and understand, but in order to deal with them everything must be loaded into memory.</p></li>
<li><p><strong>sqlite3 databases</strong>, which requires sqlite3 to read, but provides more power for filtering and automatic processing without reading everything into memory.</p></li>
</ul>
<section id="dataframe-format-in-memory">
<h2>DataFrame format (in-memory)<a class="headerlink" href="#dataframe-format-in-memory" title="Permalink to this headline"></a></h2>
<p>In-memory, data is stored in a <a class="reference external" href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.html">pandas DataFrame</a>.  This is basically a normal dataframe.  There are some standardized columns (see <a class="reference internal" href="../schema/"><span class="doc">Data schema</span></a>) and the index is a DatetimeIndex.</p>
</section>
<section id="csv-files">
<h2>CSV files<a class="headerlink" href="#csv-files" title="Permalink to this headline"></a></h2>
<p>CSV files should have a header that lists the column names and generally be readable by <code class="docutils literal notranslate"><span class="pre">pandas.read_csv</span></code>.</p>
<p>Reading these can be done with <code class="docutils literal notranslate"><span class="pre">niimpy.read_csv</span></code>:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">TZ</span> <span class="o">=</span> <span class="s1">&#39;Europe/Helsinki&#39;</span>
<span class="kn">import</span> <span class="nn">niimpy</span>
<span class="c1"># niimpy.sampledata.DATA_CSV is a string containing a filename file</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">niimpy</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">niimpy</span><span class="o">.</span><span class="n">sampledata</span><span class="o">.</span><span class="n">DATA_CSV</span><span class="p">,</span> <span class="n">tz</span><span class="o">=</span><span class="n">TZ</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="sqlite3-databases">
<h2>sqlite3 databases<a class="headerlink" href="#sqlite3-databases" title="Permalink to this headline"></a></h2>
<p>For the purposes of niimpy, sqlite3 databases can generally be seen as supercharged CSV files.</p>
<p>A single database file could contain multiple datasets within it, thus when reading them a <strong>table name</strong> must be specified.</p>
<p>One reads the entire database into memory using <code class="docutils literal notranslate"><span class="pre">sqlite.read_sqlite</span></code>:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># niimpy.sampledata.DATA is a string containing a filename</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">niimpy</span><span class="o">.</span><span class="n">read_sqlite</span><span class="p">(</span><span class="n">niimpy</span><span class="o">.</span><span class="n">sampledata</span><span class="o">.</span><span class="n">DATA</span><span class="p">,</span> <span class="s1">&#39;AwareScreen&#39;</span><span class="p">,</span> <span class="n">tz</span><span class="o">=</span><span class="n">TZ</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>You can list the tables within a database using <code class="docutils literal notranslate"><span class="pre">niimpy.read_sqlite_tables</span></code>:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">niimpy</span><span class="o">.</span><span class="n">read_sqlite_tables</span><span class="p">(</span><span class="n">niimpy</span><span class="o">.</span><span class="n">sampledata</span><span class="o">.</span><span class="n">DATA</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>{&#39;AwareScreen&#39;}
</pre></div>
</div>
</div>
</div>
<p>sqlite3 files are highly recommended as a data storage format, since many common exploration options can be done within the database itself without reading the whole data into memory or writing an iterator.  However, the interface is more difficult to use.  Niimpy (before 2021-07) used this as its primary interface, but since then this interface has been de-emphasized.  You can read more in <a class="reference internal" href="../database/"><span class="doc">Database interface</span></a>, but this is only recommended if you need efficiency when using massive amounts of data.</p>
</section>
<section id="other-formats">
<h2>Other formats<a class="headerlink" href="#other-formats" title="Permalink to this headline"></a></h2>
<p>You can use any format you can read with pandas.  Apply the function <code class="docutils literal notranslate"><span class="pre">niimpy.util.df_normalize</span></code> in order to fix it up into the proper format.</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="../introduction/" class="btn btn-neutral float-left" title="Niimpy introduction" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../basic-transformations/" class="btn btn-neutral float-right" title="Basic transformations" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2020, the contributors.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>