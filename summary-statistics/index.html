<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Summary statistics &mdash; Niimpy dev documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../_static/togglebutton.css" type="text/css" />
      <link rel="stylesheet" href="../_static/mystnb.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script>let toggleHintShow = 'Click to show';</script>
        <script>let toggleHintHide = 'Click to hide';</script>
        <script>let toggleOpenOnPrint = 'true';</script>
        <script src="../_static/togglebutton.js"></script>
        <script>var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
        <script>window.MathJax = {"options": {"processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
        <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex/" />
    <link rel="search" title="Search" href="../search/" />
    <link rel="next" title="See also" href="../see-also/" />
    <link rel="prev" title="Preprocessing" href="../preprocessing/" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../" class="icon icon-home"> Niimpy
          </a>
              <div class="version">
                dev
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search/" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Basics</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../introduction/">Niimpy introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../input-formats/">File formats</a></li>
<li class="toctree-l1"><a class="reference internal" href="../basic-transformations/">Basic transformations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../preprocessing/">Preprocessing</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Summary statistics</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#hourly-data">Hourly data</a></li>
<li class="toctree-l2"><a class="reference internal" href="#occurance">Occurance</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../see-also/">See also</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Data stream analysis</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../survey/">Surveys</a></li>
<li class="toctree-l1"><a class="reference internal" href="../screen/">Screen</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../schema/">Data schema</a></li>
<li class="toctree-l1"><a class="reference internal" href="../architecture/">Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../database/">Database interface</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api/modules/">niimpy API docs</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Development</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../adding-features/">Adding features</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Data documentation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../data-sources/">About data sources</a></li>
<li class="toctree-l1"><a class="reference internal" href="../aware/">Aware</a></li>
<li class="toctree-l1"><a class="reference internal" href="../aware/#survey">Survey</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../">Niimpy</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../" class="icon icon-home"></a> &raquo;</li>
      <li>Summary statistics</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/summary-statistics.ipynb.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section class="tex2jax_ignore mathjax_ignore" id="summary-statistics">
<h1>Summary statistics<a class="headerlink" href="#summary-statistics" title="Permalink to this headline"></a></h1>
<p>There are many ways you may want to get an overview of your data.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">niimpy</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">niimpy</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">niimpy</span><span class="o">.</span><span class="n">sampledata</span><span class="o">.</span><span class="n">SCREEN_MONTH</span><span class="p">,</span> <span class="n">tz</span><span class="o">=</span><span class="s1">&#39;Europe/Helsinki&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<section id="hourly-data">
<h2>Hourly data<a class="headerlink" href="#hourly-data" title="Permalink to this headline"></a></h2>
<p>It is easy to get the amount of data in each hour</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">hourly</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">groupby</span><span class="p">([</span><span class="n">df</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">date</span><span class="p">,</span> <span class="n">df</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">hour</span><span class="p">])</span><span class="o">.</span><span class="n">size</span><span class="p">()</span>
<span class="n">hourly</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>2017-03-01  7      6
            8     20
            9     19
            10    12
            11    18
                  ..
2017-03-31  19     6
            20     2
            21    31
            22    11
            23     7
Length: 380, dtype: int64
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># The index is the (day, hour) pairs and the</span>
<span class="c1"># value is the number at that time</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%s</span><span class="s1"> had </span><span class="si">%d</span><span class="s1"> data points&#39;</span><span class="o">%</span><span class="p">(</span><span class="n">hourly</span><span class="o">.</span><span class="n">index</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">hourly</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>(datetime.date(2017, 3, 1), 7) had 6 data points
</pre></div>
</div>
</div>
</div>
</section>
<section id="occurance">
<h2>Occurance<a class="headerlink" href="#occurance" title="Permalink to this headline"></a></h2>
<p>In niimpy, <strong>occurance</strong> is a way to see the completeness of data.</p>
<p>Occurance is defined as such:</p>
<ul class="simple">
<li><p>Divides all time into hours</p></li>
<li><p>Divides all hours into five 12-minute intervals</p></li>
<li><p>Count the number of 12-minute intervals that have data.  This is <span class="math notranslate nohighlight">\(occurrence\)</span></p></li>
<li><p>For each hour, report <span class="math notranslate nohighlight">\(occurrence\)</span>. “5”is taken to mean that data is present somewhat regularly, while “0” means we have no data.</p></li>
</ul>
<p>This isn’t the perfect measure, but is reasonably effective and simple to calculate.  For data which isn’t continuous (like screen data we are actually using), it shows how much the sensor has been used.</p>
<p>Column meanings: <code class="docutils literal notranslate"><span class="pre">day</span></code> is obvious, <code class="docutils literal notranslate"><span class="pre">hour</span></code> is hour of day, <code class="docutils literal notranslate"><span class="pre">occurrence</span></code> is the measure described above, <code class="docutils literal notranslate"><span class="pre">count</span></code> is total number of data points in this hour, <code class="docutils literal notranslate"><span class="pre">withdata</span></code> is which of the 12-min intervals (0-4) have data.</p>
<p>Note that the “uniformly present data” is not true for all data sources.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">occurrences</span> <span class="o">=</span> <span class="n">niimpy</span><span class="o">.</span><span class="n">util</span><span class="o">.</span><span class="n">occurrence</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">index</span><span class="p">)</span>
<span class="n">occurrences</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>day</th>
      <th>hour</th>
      <th>occurrence</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>2017-03-01 07:00:00</th>
      <td>2017-03-01</td>
      <td>7</td>
      <td>1</td>
    </tr>
    <tr>
      <th>2017-03-01 08:00:00</th>
      <td>2017-03-01</td>
      <td>8</td>
      <td>4</td>
    </tr>
    <tr>
      <th>2017-03-01 09:00:00</th>
      <td>2017-03-01</td>
      <td>9</td>
      <td>1</td>
    </tr>
    <tr>
      <th>2017-03-01 10:00:00</th>
      <td>2017-03-01</td>
      <td>10</td>
      <td>5</td>
    </tr>
    <tr>
      <th>2017-03-01 11:00:00</th>
      <td>2017-03-01</td>
      <td>11</td>
      <td>2</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">occ_pivot</span> <span class="o">=</span> <span class="n">occurrences</span><span class="o">.</span><span class="n">pivot</span><span class="p">(</span><span class="s1">&#39;hour&#39;</span><span class="p">,</span> <span class="s1">&#39;day&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">matplotlib</span> <span class="kn">import</span> <span class="n">pyplot</span>
<span class="n">ax</span> <span class="o">=</span> <span class="n">pyplot</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="n">occ_pivot</span><span class="p">)</span>
<span class="n">pyplot</span><span class="o">.</span><span class="n">xticklabels</span><span class="p">(</span><span class="n">occ_pivot</span><span class="o">.</span><span class="n">index</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">AttributeError</span><span class="g g-Whitespace">                            </span>Traceback (most recent call last)
<span class="n">Input</span> <span class="n">In</span> <span class="p">[</span><span class="mi">6</span><span class="p">],</span> <span class="ow">in</span> <span class="o">&lt;</span><span class="n">module</span><span class="o">&gt;</span>
<span class="g g-Whitespace">      </span><span class="mi">1</span> <span class="kn">from</span> <span class="nn">matplotlib</span> <span class="kn">import</span> <span class="n">pyplot</span>
<span class="g g-Whitespace">      </span><span class="mi">2</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">pyplot</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="n">occ_pivot</span><span class="p">)</span>
<span class="ne">----&gt; </span><span class="mi">3</span> <span class="n">pyplot</span><span class="o">.</span><span class="n">xticklabels</span><span class="p">(</span><span class="n">occ_pivot</span><span class="o">.</span><span class="n">index</span><span class="p">)</span>

<span class="ne">AttributeError</span>: module &#39;matplotlib.pyplot&#39; has no attribute &#39;xticklabels&#39;
</pre></div>
</div>
<img alt="../_images/summary-statistics_8_1.png" src="../_images/summary-statistics_8_1.png" />
</div>
</div>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="../preprocessing/" class="btn btn-neutral float-left" title="Preprocessing" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../see-also/" class="btn btn-neutral float-right" title="See also" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2020, the contributors.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>